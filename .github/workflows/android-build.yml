name: Simple Android Build

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Validate Project Structure
      run: |
        echo "ðŸ” Checking project files..."
        ls -la
        echo "--- ProjectSettings ---"
        ls -la ProjectSettings/ || echo "ProjectSettings not found"
        echo "--- Packages ---"
        ls -la Packages/ || echo "Packages not found"
        echo "--- Assets ---"
        ls -la Assets/ || echo "Assets not found"
        
    - name: Create Basic Unity Project
      run: |
        # Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù†Ø¯
        if [ ! -f "Packages/manifest.json" ]; then
          echo "ðŸ“¦ Creating manifest.json..."
          cat > Packages/manifest.json << EOF
{
  "dependencies": {
    "com.unity.render-pipelines.universal": "14.0.8",
    "com.unity.cinemachine": "2.9.7",
    "com.unity.inputsystem": "1.6.3",
    "com.unity.textmeshpro": "3.0.6",
    "com.unity.modules.audio": "1.0.0",
    "com.unity.modules.particlesystem": "1.0.0",
    "com.unity.modules.physics": "1.0.0"
  }
}
EOF
        fi
        
    - name: Setup Android Build Environment
      uses: android-actions/setup-android@v3
      
    - name: Upload Project Structure
      uses: actions/upload-artifact@v4
      with:
        name: Project-Files
        path: |
          Packages/
          Assets/
          ProjectSettings/
        retention-days: 1


